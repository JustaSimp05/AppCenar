<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <h2 class="mb-0">
      <i class="fas fa-store-alt text-primary me-2"></i>
      Home del comercio
    </h2>
    <p class="text-muted mb-0">
      Bienvenido, {{commerce.nombreComercio}}. Aquí puedes ver los pedidos que han realizado a tu comercio.
    </p>
  </div>

  <div class="d-flex align-items-center">
    {{#if commerce.logoComercio}}
      <img src="{{commerce.logoComercio}}" alt="Logo" class="rounded-circle border"
           style="width: 56px; height: 56px; object-fit: cover;">
    {{else}}
      <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center text-white"
           style="width: 56px; height: 56px;">
        <i class="fas fa-store fa-lg"></i>
      </div>
    {{/if}}
  </div>
</div>

<hr>

<div class="row mb-4">
  <div class="col-md-3 mb-3">
    <div class="card shadow-sm border-0">
      <div class="card-body">
        <h6 class="text-muted text-uppercase mb-1">Pedidos totales</h6>
        <h3 class="mb-0">{{stats.totalOrders}}</h3>
      </div>
    </div>
  </div>
  <div class="col-md-3 mb-3">
    <div class="card shadow-sm border-0">
      <div class="card-body">
        <h6 class="text-muted text-uppercase mb-1">Pendientes</h6>
        <h3 class="mb-0 text-warning">{{stats.pending}}</h3>
      </div>
    </div>
  </div>
  <div class="col-md-3 mb-3">
    <div class="card shadow-sm border-0">
      <div class="card-body">
        <h6 class="text-muted text-uppercase mb-1">En proceso</h6>
        <h3 class="mb-0 text-info">{{stats.inProcess}}</h3>
      </div>
    </div>
  </div>
  <div class="col-md-3 mb-3">
    <div class="card shadow-sm border-0">
      <div class="card-body">
        <h6 class="text-muted text-uppercase mb-1">Completados</h6>
        <h3 class="mb-0 text-success">{{stats.completed}}</h3>
      </div>
    </div>
  </div>
</div>

<h4 class="mb-3">Pedidos recientes</h4>

{{#if orders.length}}
  <div class="table-responsive">
    <table class="table align-middle table-hover">
      <thead class="table-light">
        <tr>
          <th>Comercio</th>
          <th>Estado</th>
          <th>Total</th>
          <th>Cant. productos</th>
          <th>Fecha y hora</th>
          <th>Cliente</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {{#each orders}}
          <tr>
            <td>
              <div class="d-flex align-items-center">
                {{#if ../commerce.logoComercio}}
                  <img src="{{../commerce.logoComercio}}" alt="Logo" class="rounded me-2"
                       style="width: 40px; height: 40px; object-fit: cover;">
                {{else}}
                  <div class="rounded bg-primary text-white d-flex align-items-center justify-content-center me-2"
                       style="width: 40px; height: 40px;">
                    <i class="fas fa-store"></i>
                  </div>
                {{/if}}
                <div>
                  <div class="fw-semibold">{{../commerce.nombreComercio}}</div>
                  <small class="text-muted">Pedido #{{this._id}}</small>
                </div>
              </div>
            </td>
            <td>
              {{#ifEquals this.estado "pendiente"}}
                <span class="badge bg-warning text-dark">Pendiente</span>
              {{/ifEquals}}
              {{#ifEquals this.estado "en proceso"}}
                <span class="badge bg-info text-dark">En proceso</span>
              {{/ifEquals}}
              {{#ifEquals this.estado "completado"}}
                <span class="badge bg-success">Completado</span>
              {{/ifEquals}}
            </td>
            <td>
              <span class="fw-semibold">RD$ {{this.total}}</span>
            </td>
            <td>{{this.productos.length}}</td>
            <td>
              <div>{{this.creadoEn}}</div>
            </td>
            <td>
              {{#if this.cliente}}
                <div>{{this.cliente.nombre}} {{this.cliente.apellido}}</div>
                <small class="text-muted">{{this.cliente.telefono}}</small>
              {{else}}
                <span class="text-muted">Sin datos</span>
              {{/if}}
            </td>
            <td class="text-end">
              <a href="/commerce/orders/{{this._id}}" class="btn btn-sm btn-outline-primary">
                <i class="fas fa-eye me-1"></i> Ver detalle
              </a>
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
{{else}}
  <div class="alert alert-info">
    Aún no tienes pedidos registrados para este comercio.
  </div>
{{/if}}
